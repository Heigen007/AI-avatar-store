<template>
    <div class="min-h-screen px-4 py-6 bg-gradient-to-b from-white via-violet-50 to-white text-gray-800">
        <h1 class="text-xl font-semibold text-center text-violet-700 mb-6">–ú–æ–∏ —á–∞—Ç—ã</h1>

        <div v-if="sessions.length === 0" class="text-center text-violet-500 mt-20">
            <div class="text-4xl mb-2">üí¨</div>
            <div class="text-base">–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç —á–∞—Ç–æ–≤ —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏</div>
            <div class="text-sm text-violet-400 mt-1">–°–æ–∑–¥–∞–π –∞–≤–∞—Ç–∞—Ä–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</div>
        </div>

        <div v-else class="flex flex-col gap-3">
            <ChatSessionCard
                v-for="session in sessions"
                :key="session.id"
                :session="session"
                @open="openChat(session.id)"
            />
        </div>
    </div>
</template>

<script setup lang="ts">
import { useRouter } from 'vue-router'
import ChatSessionCard from 'src/components/ChatSessionCard.vue'
import { UserProfile } from 'src/models/UserProfile'

const router = useRouter()
const sessions = UserProfile.currentUser?.chatSessions ?? []

function openChat(id: string) {
    router.push({ name: 'ChatPage', params: { sessionId: id } })
}
</script>
